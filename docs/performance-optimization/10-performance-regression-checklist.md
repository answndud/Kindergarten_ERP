# Performance Regression Checklist

## 목적

성능 개선 후 기능 추가/수정 시 회귀를 빠르게 감지하기 위한 PR 체크리스트입니다.

## PR 체크리스트

### 1) 시나리오 고정

- [ ] 비교 시나리오를 명시했다 (API, 파라미터, 데이터 볼륨)
- [ ] Before/After가 같은 환경인지 확인했다

### 2) 핵심 지표

- [ ] `avg` 응답시간 기록
- [ ] `p95` 응답시간 기록
- [ ] 요청당 SQL query 수 기록
- [ ] 실패율(error rate) 기록 (부하 테스트 대상)

### 3) 쿼리/실행계획

- [ ] N+1 발생 여부 점검(로그/쿼리 카운트)
- [ ] EXPLAIN 전/후 첨부 (변경 쿼리 대상)
- [ ] `ALL`, `Using filesort` 발생 여부 확인

### 4) 캐시/정합성

- [ ] 캐시 hit/miss 성능 모두 확인
- [ ] 무효화 이벤트(쓰기 경로) 테스트 추가
- [ ] TTL 정책이 문서와 일치하는지 확인

### 5) 운영 리스크

- [ ] 인덱스 추가 시 write cost 영향 검토
- [ ] Redis/DB 장애 시 폴백 동작 점검
- [ ] 문서(`docs/performance-optimization`) 업데이트 완료

## 회귀 판정 기준(권장)

- p95가 기준선 대비 20% 이상 악화 시 원인 분석 필수
- queries 증가 시 "의도적 증가인지" 근거 없으면 반려
- 캐시 적용 변경은 정합성 테스트 없으면 반려
