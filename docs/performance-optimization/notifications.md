# 알림 시스템 성능/UX 최적화

## 문제
- 승인/거절/공지/알림장 이벤트가 UI 알림으로 바로 반영되지 않아 사용자가 상태를 다시 확인해야 했다.
- 드롭다운은 읽음/삭제 동작은 있으나 기본 필터와 soft delete 정책이 명확하지 않았다.

## 개선
- 이벤트 기반 `notifications-changed` 트리거로 배지/목록을 즉시 갱신.
- 기본 필터를 미읽음으로 설정하고, 전체 토글로 확장.
- 삭제는 soft delete로 숨김, 읽음은 보관하도록 정책/UX를 일치.

## 효과(정성)
- 새 알림 도착 시 배지/목록이 즉시 반영되어 재조회가 줄어듦.
- 읽음/삭제 정책이 명확해져 UX 혼선 감소.

## 선택 이유
- HTMX 부분 갱신이 전체 페이지 리렌더링보다 네트워크 비용이 작고, SSR 구조와 잘 맞는다.
- soft delete는 사용자 실수 방지와 감사 추적에 유리하다.

## 예상 질문/답변
1) Q: 왜 실시간 WebSocket 대신 HTMX 이벤트를 사용했나요?
   A: 현재 규모에서 즉시성은 이벤트+폴링 보조로 충분하고, 구현/운영 비용이 낮습니다.
2) Q: 읽음과 삭제를 분리한 이유는?
   A: 읽음은 보관이 필요하고, 삭제는 사용자의 화면 정리 요구를 충족시키기 위해 분리했습니다.
3) Q: 왜 기본 탭을 미읽음으로 했나요?
   A: 사용자가 행동해야 할 알림을 가장 먼저 확인하도록 유도하기 위해서입니다.
4) Q: 알림이 누락되는 상황은 없나요?
   A: 이벤트 트리거와 30초 폴링을 함께 사용해 갱신 누락 가능성을 낮췄습니다.
5) Q: soft delete가 성능에 영향은 없나요?
   A: 조회 조건에 deletedAt 필터가 추가되지만 인덱스로 완화 가능하며, 복구/감사 이점이 큽니다.
