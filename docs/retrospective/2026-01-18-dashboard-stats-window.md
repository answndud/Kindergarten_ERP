# 2026-01-18: 대시보드 통계 기간 집계 개선 회고

## 문제 개요

**증상(사용자 관점)**
- 대시보드 통계가 "오늘" 기준으로만 계산되어 기간 비교가 어렵다.
- 브라우저 시간대에 따라 날짜 경계가 달라져 수치가 어긋나는 사례가 발생했다.

**영향**
- 원장/교사가 최근 7일, 30일 흐름을 빠르게 확인할 수 없었다.
- 집계 기준이 불명확해 통계 신뢰도가 떨어졌다.

---

## 문제 원인

### 1) 기간 선택 UI 부재
- 기존 통계는 화면 진입 시 "오늘" 값만 계산하였다.
- 기간별 추이를 확인할 수 있는 선택지가 없었다.

### 2) 시간대 기준 정의 미흡
- 로컬 브라우저 시간대를 그대로 사용해 날짜 경계가 사용 환경에 따라 달라졌다.
- 운영 기준(Asia/Seoul)이 명확히 문서화되지 않았다.

---

## 해결/개선 조치

### 1) 기간 선택 UI 추가
- 대시보드에 "최근 7일 / 최근 30일" 토글을 추가했다.
- 선택 값에 따라 알림장/공지/출석률 집계를 다시 계산한다.

### 2) KST 기준 날짜 계산
- 날짜 연산을 KST(GMT+9) 기준으로 통일했다.
- 통계 카드에 기준 시간대를 표시해 혼선을 줄였다.

---

## 향후 방지책

- 대시보드 통계를 서버 집계 API로 통합해 기준 시간대가 흔들리지 않도록 한다.
- 기간별 통계는 API에서 날짜 범위를 직접 계산하도록 개선한다.
