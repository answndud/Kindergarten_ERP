# 2026-01-17: 대시보드 승인 대기 카드 갱신 누락 회고

## 문제 개요

**증상(사용자 관점)**
- 원장 대시보드의 "승인 대기" 카드 숫자가 0 또는 `-`로 고정됨.
- 승인 대기 목록에는 데이터가 존재하지만 카드에 반영되지 않음.

**영향**
- 원장이 대시보드에서 실제 승인 건수를 파악하지 못함.
- 승인 대기 화면으로 이동해야만 현재 상태를 확인해야 하는 불편이 발생.

---

## 문제 원인

### 1) API 역할 차이에 대한 처리가 부족
- 원장 승인 대기 카드는 교사 지원(`kindergarten-applications`)과 입학 신청(`kid-applications`) 두 API에 동시에 의존한다.
- 교사 지원 API는 `PRINCIPAL` 권한만 허용한다.
- 대시보드 스크립트는 역할별 응답 실패를 고려하지 않아, 하나라도 실패하면 숫자가 갱신되지 않았다.

---

## 해결/개선 조치

### 1) 역할 기반 분기 처리
- `PRINCIPAL`과 `TEACHER`를 구분해 승인 대기 수를 계산하도록 수정.
- 교사 계정에서 접근 가능한 `kid-applications` 응답만으로도 숫자를 노출한다.
- 원장 계정은 두 목록을 합산한다.

---

## 향후 방지책

- 대시보드 집계 API를 단일 엔드포인트로 통합해 역할/권한 분기 로직을 서버에서 처리하도록 검토한다.
- 통계 카드 로드 실패 시 최소한의 fallback 값(0)과 로그를 남겨 UX를 보호한다.
